<div class="pagina-carrito">
    <h1>Carrito de Compras</h1>
    <p class="id-carrito">ID del Carrito: {{cartId}}</p>
    
    {{#if products.length}}
        <div class="productos-carrito">
            {{#each products}}
                {{#if this.product}}
                    <div class="item-carrito">
                        <div class="imagen-item">
                            <img src="/img/productos/{{product.thumbnails}}" alt="{{this.product.title}}">
                        </div>
                        <div class="detalles-item">
                            <h3>{{this.product.title}}</h3>
                            <p class="codigo-item">Código: {{this.product.code}}</p>
                        </div>
                        <div class="precios-item">
                            <p>Precio unitario: <strong>${{this.product.price}}</strong></p>
                            <p>Cantidad: <strong>{{this.quantity}}</strong></p>
                            <p class="subtotal-item">Subtotal: <strong>${{this.subtotal}}</strong></p>
                        </div>
                        <div class="acciones-item">
                            <form action="/cart/{{../cartId}}/product/{{this.product._id}}/delete" method="POST">
                                <button type="submit" class="btn-eliminar-item">×</button>
                            </form>
                        </div>
                    </div>
                {{else}}
                    <div class="item-carrito error">
                        <p>Producto no disponible</p>
                    </div>
                {{/if}}
            {{/each}}
        </div>
        
        <div class="total-carrito">
            <h2>Total: ${{total}}</h2>
        </div>
        
        <div class="acciones-carrito">
            <a href="/" class="btn-continuar">Continuar comprando</a>
            <form action="/cart/{{cartId}}/clear" method="POST" style="display: inline;">
                <button type="submit" class="btn-vaciar-carrito">Vaciar carrito</button>
            </form>
            <button class="btn-finalizar">Finalizar compra</button>
        </div>
    {{else}}
        <div class="carrito-vacio">
            <p>El carrito está vacío</p>
            <a href="/" class="btn-continuar">Ir a comprar</a>
        </div>
    {{/if}}
</div>
